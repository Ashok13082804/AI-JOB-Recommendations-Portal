{% extends "base.html" %}

{% block title %}Assessment Result - Job Portal{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 text-center">
            <div class="card shadow border-0 glass-card p-5">
                <div class="result-icon mb-4">
                    {% if type == 'skill' %}
                    {% if result.is_passed %}
                    <div class="display-1 text-success"><i class="bi bi-check-circle-fill"></i></div>
                    <h1 class="fw-bold mt-3">Congratulations!</h1>
                    <p class="lead">You have successfully passed the <strong>{{ test.skill_name }}</strong>
                        certification.</p>
                    {% else %}
                    <div class="display-1 text-danger"><i class="bi bi-x-circle-fill"></i></div>
                    <h1 class="fw-bold mt-3">Keep Practicing!</h1>
                    <p class="lead">You didn't pass this time. Review your skills and try again soon.</p>
                    {% endif %}
                    {% else %}
                    <div class="display-1 text-primary"><i class="bi bi-person-badge-fill"></i></div>
                    <h1 class="fw-bold mt-3">Assessment Complete</h1>
                    <p class="lead">Your psychological profile for <strong>{{ test.title }}</strong> is ready.</p>
                    {% endif %}
                </div>

                <div class="result-stats mb-5">
                    <div class="row g-3 justify-content-center">
                        <div class="col-sm-4">
                            <div class="p-3 bg-light rounded-4">
                                <div class="small fw-bold text-uppercase opacity-50">Score</div>
                                <div class="display-6 fw-bold">{{ result.score }}{% if type == 'skill' %}%{% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="p-3 bg-light rounded-4">
                                <div class="small fw-bold text-uppercase opacity-50">Status</div>
                                <div
                                    class="fs-4 fw-bold text-{{ 'success' if (type == 'psychology' or result.is_passed) else 'danger' }}">
                                    {{ 'Passed' if (type == 'skill' and result.is_passed) else ('In Review' if type ==
                                    'psychology' else 'Failed') }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                {% if type == 'psychology' %}
                <div class="analysis-box text-start bg-light p-4 rounded-4 mb-5 border-start border-primary border-5">
                    <h5 class="fw-bold"><i class="bi bi-graph-up-arrow me-2"></i> Professional Analysis</h5>
                    <p class="mb-0">{{ result.analysis }}</p>
                </div>
                {% endif %}

                <div class="actions d-flex gap-3 justify-content-center">
                    {% if certificate %}
                    <a href="{{ certificate.file_path }}" class="btn btn-success btn-lg px-5 rounded-pill shadow"
                        download>
                        <i class="bi bi-download me-2"></i> Download Certificate
                    </a>
                    {% endif %}
                    <a href="{{ url_for('tests_bp.index') }}" class="btn btn-outline-primary btn-lg px-5 rounded-pill">
                        Back to All Tests
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .glass-card {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.4);
        border-radius: 2.5rem;
    }
</style>
{% endblock %}